html(lang="en")
    head
        title Branch Details
        include head.jade
        script.
            $(document).ready(function(){
            
                $(".git").click(function(){
                    
                    $('#myModalLabel').empty();   
                    var href = $(this).attr('data-href');
                    var id = $(this).attr('id');
                    $("#gitpull").hide();
                    if(id=="gitstatus")
                    {
                        $("#gitpull").attr("data-href",href+'&gitpull=true');
                    }
                    var title = $(this).attr('title');
                    $('#myModalLabel').append(title);
                    $(".spinner").show();
                    $(".gitData").hide();
                    $.get(href,function(data){
                        $(".gitData").empty();
                        $(".gitData").append(data);
                        if(id=="gitstatus")
                        {
                           $("#gitpull").show();
                        }
                        $(".gitData").show();
                        $(".spinner").hide();
                    });
                });
            });
        style.
            .spinner {
              width: 40px;
              height: 40px;
            
              position: relative;
              margin: 100px auto;
            }
            
            .double-bounce1, .double-bounce2 {
              width: 100%;
              height: 100%;
              border-radius: 50%;
              background-color: #333;
              opacity: 0.6;
              position: absolute;
              top: 0;
              left: 0;
              
              -webkit-animation: sk-bounce 2.0s infinite ease-in-out;
              animation: sk-bounce 2.0s infinite ease-in-out;
            }
            
            .double-bounce2 {
              -webkit-animation-delay: -1.0s;
              animation-delay: -1.0s;
            }
            
            @-webkit-keyframes sk-bounce {
              0%, 100% { -webkit-transform: scale(0.0) }
              50% { -webkit-transform: scale(1.0) }
            }
            
            @keyframes sk-bounce {
              0%, 100% { 
                transform: scale(0.0);
                -webkit-transform: scale(0.0);
              } 50% { 
                transform: scale(1.0);
                -webkit-transform: scale(1.0);
              }
            }
    include body.jade
        input(type="hidden", value="#{project_id}", name="project_id", id="project_id")
        div(class="container" style="width:1048px")
            div(class="col-md-6 col-md-offset-1")
                div(class="row" style="padding: 100px;margin-left:-120px")
                    div(class="page-header" style="margin-top: -90px;")
                       h1( id="header") #{project_id}
                    div(id="here_table" class="col-md-12")
                        table(class="table table-hover" style="width:810px;float:none;font-size:100%;align:center" align="center")
                            tr
                                th Branch Name
                                th Friendly Server Name
                                th(align="center") Web URL
                                th Action
                                th(style="text-align: center;") Email
                            if(data.length > 0)
                                each bData,i in data
                                    tr
                                        td #{bData.branchname}
                                        td #{bData.friendlyservername}
                                        td(style="word-break:break-all;width: 40%;")
                                            a(href="#{bData.web_url}" target="_blank") #{bData.web_url}                         
                                        td
                                            div(class="btn-group")
                                                a(href="/branchedit/#{bData.branch_id}" class="btn btn-default") Edit
                                                button(class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false")
                                                    span(class="caret")
                                                    span(class="sr-only") Toggle Dropdown
                                                ul(class="dropdown-menu")
                                                    li
                                                        a(href="/branchdelete/#{bData.branch_id}" onclick="return confirm(\'Are you sure you want to delete the data\');") Delete Branch
                                                    li(role="separator" class="divider")                       
                                                    li
                                                        a(href="#" data-href="/gitRunCommand?app=#{project_id}&branch=#{bData.branchname}" id="gitstatus" data-toggle="modal" data-target="#myModal" class="git" title="Git Status") Git Status
                                                    li
                                                        a(href="#" data-href="/gitRunCommand?app=#{project_id}&branch=#{bData.branchname}&gitlog=true" data-toggle="modal" data-target="#myModal" id="gitlog"  class="git" title="Git Log") Git Log
                                        td(align="center")
                                            a(href="/sendemail/#{bData.branch_id}")
                                                img(src="/images/email.png")
                            else
                                tr
                                    td(colspan="5" align="center") No Branch Data Found
                            tr
                                td
                                    a(href="/projectinfo/#{project_id}") Back to Details
                                td(colspan=3 style="text-align:center")
                                    a(style="text-align: center;color: red;" href="/projectdelete/#{project_id}" onclick="return confirm(\'Are you sure you want to delete the project?\');") Delete Project
                                td
                                    a(href="/branchadd/#{project_id}") Add Branch
                    div(class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel")
                        div(class="modal-dialog" role="document")
                            div(class="modal-content")
                                div(class="modal-header")
                                    button(type="button" class="close" data-dismiss="modal" aria-label="Close")
                                        span(aria-hidden="true") &times;
                                    h4(class="modal-title" id="myModalLabel") 
                                div(class="modal-body")
                                    div(class="spinner")
                                        div(class="double-bounce1")
                                        div(class="double-bounce2")
                                    pre(class="gitData")
                                div(class="modal-footer")
                                  button(type="button" class="btn btn-default" data-dismiss="modal") Close
                                  a(class="btn btn-primary" id="gitpull" class="git" title="Git Pull") Git Pull